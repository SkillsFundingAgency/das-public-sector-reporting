(function(n){"use strict";n.validator&&n.validator.unobtrusive&&(n.validator.unobtrusive.adapters.addSingleVal("maxwords","wordcount"),n.validator.addMethod("maxwords",function(n,t,i){return(console.log("Method added"),n&&n.split(" ").length>i)?!1:!0}));var t=function(t){this.stacker={e:null,html:'<li class="menu-link"><a href="#">More<\/a><ul><\/ul><\/li>',width:0};this.e=t;this.navItems={items:{},length:0};this.navWidth=this.containerWidth=0;var i=0,u=0,r=this.navItems.items;this.e.children("li").each(function(){r[i]={html:n(this)[0].outerHTML,width:n(this).outerWidth(!0),submenu:!1,visible:!0};n(this).hasClass("submenu")&&(r[i].submenu=!0);u+=r[i].width;i++});this.navItems.length=i;this.navWidth=u;this.stacker.e=n(this.stacker.html).appendTo(this.e);this.stacker.width=this.stacker.e.outerWidth(!0);this.stacker.e.remove();this.magic()};t.prototype.resetStack=function(){for(var n=0;n<this.navItems.length;n++)this.navItems.items[n].visible=!0};t.prototype.magic=function(){this.resetStack();this.containerWidth=this.e.parent().width()-15;var t=0,n=0;if(this.containerWidth<this.navWidth)for(n=0;n<this.navItems.length;n++)t+=this.navItems.items[n].width,t+this.stacker.width>this.containerWidth&&(this.navItems.items[n].visible=!1);this.stack()};t.prototype.stack=function(){var r,t,i;for(this.e.empty(),r=!1,t=0,t=0;t<this.navItems.length;t++)if(this.navItems.items[t].visible)n(this.navItems.items[t].html).appendTo(this.e);else{r=!0;break}if(r)for(this.stacker.e=n(this.stacker.html).appendTo(this.e),t=0;t<this.navItems.length;t++)this.navItems.items[t].visible||(i=this.navItems.items[t].html,i.indexOf("<ul>")!==-1&&(i=i.replace(/<a[^>]*>/,'<span class="sa-anchor-replacement">').replace(/<\/a>/,"<\/span>")),n(i).appendTo(this.stacker.e.children("ul")),this.navItems.items[t].visible=!1)};t.prototype.setActions=function(){var t=this.e,i="li.submenu, li.menu-link";n(t).on("click.stackable.nav","li.submenu>a, li.menu-link>a",function(){return n(this).parent().hasClass("sub-menu-open")?n(t.selector).children(i).removeClass("sub-menu-open"):(GOVUK.navigation.closeAllOpenMenus(),n(t.selector).children(i).removeClass("sub-menu-open"),n(this).parent().toggleClass("sub-menu-open")),!1});n(document).on("click.stackable.closure",function(){n(t.selector).children(i).removeClass("sub-menu-open");GOVUK.navigation.closeAllOpenMenus()});n(document).on("keydown",this,function(r){r.keyCode!==9&&(n(t.selector).children(i).removeClass("sub-menu-open"),sfa.navigation.closeAllOpenMenus())})};n.fn.collapsableNav=function(i){var u=!1,r;this.each(function(){this.tagName!="UL"&&(u=!0)});u||(r=new t(this,n.extend({stackerLabel:"+"},i)),r.setActions(),n(window).resize(function(){r.magic()}))}})(jQuery),function(){"use strict";var n=this;typeof n.GOVUK=="undefined"&&(n.GOVUK={});GOVUK.navigation={elems:{userNav:$("nav#user-nav > ul"),levyNav:$("ul#global-nav-links")},init:function(){this.setupMenus(this.elems.userNav);this.setupEvents(this.elems.userNav)},setupMenus:function(n){n.find("ul").addClass("js-hidden").attr("aria-hidden","true")},setupEvents:function(n){var t=this;n.find("li.has-sub-menu > a").on("click",function(n){var i=$(this);t.toggleMenu(i,i.next("ul"));n.stopPropagation();n.preventDefault()});n.find("li.has-sub-menu > ul > li > a").on("focusout",function(){var n=$(this);$(this).parent().is(":last-child")&&t.toggleMenu(n,n.next("ul"))})},toggleMenu:function(n,t){var i=n.parent();i.hasClass("open")?(i.removeClass("open"),t.addClass("js-hidden").attr("aria-hidden","true")):(this.closeAllOpenMenus(),i.addClass("open"),t.removeClass("js-hidden").attr("aria-hidden","false"))},closeAllOpenMenus:function(){this.elems.userNav.find("li.has-sub-menu.open").removeClass("open").find("ul").addClass("js-hidden").attr("aria-hidden","true");this.elems.levyNav.find("li.open").removeClass("open").addClass("js-hidden").attr("aria-hidden","true")},linkSettings:function(){var n=$("a#link-settings"),t=this;this.toggleUserMenu();n.attr("aria-hidden","false");n.on("click touchstart",function(n){var i=$(this).attr("href");$(this).toggleClass("open");t.toggleUserMenu();n.preventDefault()})},toggleUserMenu:function(){var n=this.elems.userNav.parent();n.hasClass("close")?n.removeClass("close").attr("aria-hidden","false"):n.addClass("close").attr("aria-hidden","true")}};GOVUK.wordCount={elems:{$wordLengthTextarea:$(".js-word-limit")},init:function(){if(!this.elems.$wordLengthTextarea.length)return!1;this.elems.$wordLengthTextarea.on("keyup input",this.countWords(this));this.countWords(this).call()},countWords:function(n){return function(){var r=n.elems.$wordLengthTextarea.data("word-limit"),t=n.elems.$wordLengthTextarea.val().split(/[\s]+/),i,u;t[0]===""&&t.splice(0,2);t[t.length-1]===""&&t.splice(1,1);i=r-t.length;t===""&&(i=r);u=i===1||i===-1?"word":"words";t.length<=r?$(".words-left").html(i+" "+u+" left"):$(".words-left").html((i*=-1)+" "+u+" too many")}}};window.GOVUK&&GOVUK.wordCount&&GOVUK.wordCount.init();window.GOVUK&&GOVUK.navigation&&(GOVUK.navigation.init(),$("ul#global-nav-links").collapsableNav());GOVUK.stickyNav={elems:{$nav:$(".floating-menu"),$navHolder:$("#floating-menu-holder"),$window:$(window),$body:$(document.body)},init:function(){if(!this.elems.$nav.length)return!1;this.elems.topOfNav=this.elems.$navHolder.offset().top;this.elems.$window.on("scroll",this.fixedNav(this));this.elems.$window.on("resize",this.pageResized(this))},pageResized:function(n){return function(){n.elems.topOfNav=n.elems.$navHolder.offset().top}},fixedNav:function(n){return function(){var t=n.elems.$body.hasClass("sticky-nav");n.elems.$window.scrollTop()>=n.elems.topOfNav?t||n.elems.$body.addClass("sticky-nav").css("padding-top",n.elems.$nav.height()+"px"):t&&n.elems.$body.removeClass("sticky-nav").css("padding-top",0)}}};window.GOVUK&&GOVUK.stickyNav&&GOVUK.stickyNav.init()}.call(this);