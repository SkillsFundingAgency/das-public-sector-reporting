(function(){"use strict";var n=this;typeof n.GOVUK=="undefined"&&(n.GOVUK={});GOVUK.navigation={elems:{userNav:$("nav#user-nav > ul"),levyNav:$("ul#global-nav-links")},init:function(){this.setupMenus(this.elems.userNav);this.setupEvents(this.elems.userNav)},setupMenus:function(n){n.find("ul").addClass("js-hidden").attr("aria-hidden","true")},setupEvents:function(n){var t=this;n.find("li.has-sub-menu > a").on("click",function(n){var i=$(this);t.toggleMenu(i,i.next("ul"));n.stopPropagation();n.preventDefault()});n.find("li.has-sub-menu > ul > li > a").on("focusout",function(){var n=$(this);$(this).parent().is(":last-child")&&t.toggleMenu(n,n.next("ul"))})},toggleMenu:function(n,t){var i=n.parent();i.hasClass("open")?(i.removeClass("open"),t.addClass("js-hidden").attr("aria-hidden","true")):(this.closeAllOpenMenus(),i.addClass("open"),t.removeClass("js-hidden").attr("aria-hidden","false"))},closeAllOpenMenus:function(){this.elems.userNav.find("li.has-sub-menu.open").removeClass("open").find("ul").addClass("js-hidden").attr("aria-hidden","true");this.elems.levyNav.find("li.open").removeClass("open").addClass("js-hidden").attr("aria-hidden","true")},linkSettings:function(){var n=$("a#link-settings"),t=this;this.toggleUserMenu();n.attr("aria-hidden","false");n.on("click touchstart",function(n){var i=$(this).attr("href");$(this).toggleClass("open");t.toggleUserMenu();n.preventDefault()})},toggleUserMenu:function(){var n=this.elems.userNav.parent();n.hasClass("close")?n.removeClass("close").attr("aria-hidden","false"):n.addClass("close").attr("aria-hidden","true")}};window.GOVUK&&GOVUK.navigation&&(GOVUK.navigation.init(),$("ul#global-nav-links").collapsableNav());GOVUK.wordCount={elems:{$wordLengthTextarea:$(".js-word-limit")},init:function(){if(!this.elems.$wordLengthTextarea.length)return!1;this.elems.$wordLengthTextarea.on("keyup input",this.countWords(this));this.countWords(this).call()},countWords:function(n){return function(){var r=n.elems.$wordLengthTextarea.data("word-limit"),t=n.elems.$wordLengthTextarea.val().split(/[\s]+/),i,u;t[0]===""&&t.splice(0,2);t[t.length-1]===""&&t.splice(1,1);i=r-t.length;t===""&&(i=r);u=i===1||i===-1?"word":"words";t.length<=r?$(".words-left").html(i+" "+u+" left"):$(".words-left").html((i*=-1)+" "+u+" too many")}}};window.GOVUK&&GOVUK.wordCount&&GOVUK.wordCount.init();GOVUK.stickyNav={elems:{$nav:$(".floating-menu"),$navHolder:$("#floating-menu-holder"),$window:$(window),$body:$(document.body)},init:function(){if(!this.elems.$nav.length)return!1;this.elems.topOfNav=this.elems.$navHolder.offset().top;this.elems.$window.on("scroll",this.fixedNav(this));this.elems.$window.on("resize",this.pageResized(this))},pageResized:function(n){return function(){n.elems.topOfNav=n.elems.$navHolder.offset().top}},fixedNav:function(n){return function(){var t=n.elems.$body.hasClass("sticky-nav");n.elems.$window.scrollTop()>=n.elems.topOfNav?t||n.elems.$body.addClass("sticky-nav").css("padding-top",n.elems.$nav.height()+"px"):t&&n.elems.$body.removeClass("sticky-nav").css("padding-top",0)}}};window.GOVUK&&GOVUK.stickyNav&&GOVUK.stickyNav.init();GOVUK.addCommas={elems:{$inputs:$(".js-addcommas")},init:function(){this.elems.$inputs.on("input",this.onInput)},onInput:function(n){n.target.value=n.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}};window.GOVUK&&GOVUK.addCommas&&GOVUK.addCommas.init()}).call(this);